(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const _ of r.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&i(_)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();var X,b,Ce,I,ue,Pe,Te,$e,le,ne,re,j={},Me=[],We=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Y=Array.isArray;function S(t,e){for(var n in e)t[n]=e[n];return t}function _e(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Re(t,e,n){var i,o,r,_={};for(r in e)r=="key"?i=e[r]:r=="ref"?o=e[r]:_[r]=e[r];if(arguments.length>2&&(_.children=arguments.length>3?X.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)_[r]===void 0&&(_[r]=t.defaultProps[r]);return V(t,_,i,o,null)}function V(t,e,n,i,o){var r={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Ce,__i:-1,__u:0};return o==null&&b.vnode!=null&&b.vnode(r),r}function q(t){return t.children}function G(t,e){this.props=t,this.context=e}function W(t,e){if(e==null)return t.__?W(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?W(t):null}function Se(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Se(t)}}function de(t){(!t.__d&&(t.__d=!0)&&I.push(t)&&!K.__r++||ue!=b.debounceRendering)&&((ue=b.debounceRendering)||Pe)(K)}function K(){for(var t,e,n,i,o,r,_,c=1;I.length;)I.length>c&&I.sort(Te),t=I.shift(),c=I.length,t.__d&&(n=void 0,i=void 0,o=(i=(e=t).__v).__e,r=[],_=[],e.__P&&((n=S({},i)).__v=i.__v+1,b.vnode&&b.vnode(n),se(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[o]:null,r,o??W(i),!!(32&i.__u),_),n.__v=i.__v,n.__.__k[n.__i]=n,Ne(r,n,_),i.__e=i.__=null,n.__e!=o&&Se(n)));K.__r=0}function Ee(t,e,n,i,o,r,_,c,h,s,p){var l,u,f,m,P,w,v,g=i&&i.__k||Me,T=e.length;for(h=Oe(n,e,g,h,T),l=0;l<T;l++)(f=n.__k[l])!=null&&(u=f.__i==-1?j:g[f.__i]||j,f.__i=l,w=se(t,f,u,o,r,_,c,h,s,p),m=f.__e,f.ref&&u.ref!=f.ref&&(u.ref&&ce(u.ref,null,f),p.push(f.ref,f.__c||m,f)),P==null&&m!=null&&(P=m),(v=!!(4&f.__u))||u.__k===f.__k?h=He(f,h,t,v):typeof f.type=="function"&&w!==void 0?h=w:m&&(h=m.nextSibling),f.__u&=-7);return n.__e=P,h}function Oe(t,e,n,i,o){var r,_,c,h,s,p=n.length,l=p,u=0;for(t.__k=new Array(o),r=0;r<o;r++)(_=e[r])!=null&&typeof _!="boolean"&&typeof _!="function"?(typeof _=="string"||typeof _=="number"||typeof _=="bigint"||_.constructor==String?_=t.__k[r]=V(null,_,null,null,null):Y(_)?_=t.__k[r]=V(q,{children:_},null,null,null):_.constructor==null&&_.__b>0?_=t.__k[r]=V(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):t.__k[r]=_,h=r+u,_.__=t,_.__b=t.__b+1,c=null,(s=_.__i=je(_,n,h,l))!=-1&&(l--,(c=n[s])&&(c.__u|=2)),c==null||c.__v==null?(s==-1&&(o>p?u--:o<p&&u++),typeof _.type!="function"&&(_.__u|=4)):s!=h&&(s==h-1?u--:s==h+1?u++:(s>h?u--:u++,_.__u|=4))):t.__k[r]=null;if(l)for(r=0;r<p;r++)(c=n[r])!=null&&(2&c.__u)==0&&(c.__e==i&&(i=W(c)),Ae(c,c));return i}function He(t,e,n,i){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=He(o[r],e,n,i));return e}t.__e!=e&&(i&&(e&&t.type&&!e.parentNode&&(e=W(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function je(t,e,n,i){var o,r,_,c=t.key,h=t.type,s=e[n],p=s!=null&&(2&s.__u)==0;if(s===null&&c==null||p&&c==s.key&&h==s.type)return n;if(i>(p?1:0)){for(o=n-1,r=n+1;o>=0||r<e.length;)if((s=e[_=o>=0?o--:r++])!=null&&(2&s.__u)==0&&c==s.key&&h==s.type)return _}return-1}function fe(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||We.test(e)?n:n+"px"}function z(t,e,n,i,o){var r,_;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||fe(t.style,e,"");if(n)for(e in n)i&&n[e]==i[e]||fe(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace($e,"$1")),_=e.toLowerCase(),e=_ in t||e=="onFocusOut"||e=="onFocusIn"?_.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?i?n.u=i.u:(n.u=le,t.addEventListener(e,r?re:ne,r)):t.removeEventListener(e,r?re:ne,r);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function he(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=le++;else if(e.t<n.u)return;return n(b.event?b.event(e):e)}}}function se(t,e,n,i,o,r,_,c,h,s){var p,l,u,f,m,P,w,v,g,T,M,N,E,$,L,A,d,y=e.type;if(e.constructor!=null)return null;128&n.__u&&(h=!!(32&n.__u),r=[c=e.__e=n.__e]),(p=b.__b)&&p(e);e:if(typeof y=="function")try{if(v=e.props,g="prototype"in y&&y.prototype.render,T=(p=y.contextType)&&i[p.__c],M=p?T?T.props.value:p.__:i,n.__c?w=(l=e.__c=n.__c).__=l.__E:(g?e.__c=l=new y(v,M):(e.__c=l=new G(v,M),l.constructor=y,l.render=qe),T&&T.sub(l),l.state||(l.state={}),l.__n=i,u=l.__d=!0,l.__h=[],l._sb=[]),g&&l.__s==null&&(l.__s=l.state),g&&y.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=S({},l.__s)),S(l.__s,y.getDerivedStateFromProps(v,l.__s))),f=l.props,m=l.state,l.__v=e,u)g&&y.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),g&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(g&&y.getDerivedStateFromProps==null&&v!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(v,M),e.__v==n.__v||!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(v,l.__s,M)===!1){for(e.__v!=n.__v&&(l.props=v,l.state=l.__s,l.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(C){C&&(C.__=e)}),N=0;N<l._sb.length;N++)l.__h.push(l._sb[N]);l._sb=[],l.__h.length&&_.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(v,l.__s,M),g&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,m,P)})}if(l.context=M,l.props=v,l.__P=t,l.__e=!1,E=b.__r,$=0,g){for(l.state=l.__s,l.__d=!1,E&&E(e),p=l.render(l.props,l.state,l.context),L=0;L<l._sb.length;L++)l.__h.push(l._sb[L]);l._sb=[]}else do l.__d=!1,E&&E(e),p=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++$<25);l.state=l.__s,l.getChildContext!=null&&(i=S(S({},i),l.getChildContext())),g&&!u&&l.getSnapshotBeforeUpdate!=null&&(P=l.getSnapshotBeforeUpdate(f,m)),A=p,p!=null&&p.type===q&&p.key==null&&(A=Le(p.props.children)),c=Ee(t,Y(A)?A:[A],e,n,i,o,r,_,c,h,s),l.base=e.__e,e.__u&=-161,l.__h.length&&_.push(l),w&&(l.__E=l.__=null)}catch(C){if(e.__v=null,h||r!=null)if(C.then){for(e.__u|=h?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;r[r.indexOf(c)]=null,e.__e=c}else{for(d=r.length;d--;)_e(r[d]);oe(e)}else e.__e=n.__e,e.__k=n.__k,C.then||oe(e);b.__e(C,e,n)}else r==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):c=e.__e=Be(n.__e,e,n,i,o,r,_,h,s);return(p=b.diffed)&&p(e),128&e.__u?void 0:c}function oe(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(oe)}function Ne(t,e,n){for(var i=0;i<n.length;i++)ce(n[i],n[++i],n[++i]);b.__c&&b.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(r){r.call(o)})}catch(r){b.__e(r,o.__v)}})}function Le(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Y(t)?t.map(Le):S({},t)}function Be(t,e,n,i,o,r,_,c,h){var s,p,l,u,f,m,P,w=n.props||j,v=e.props,g=e.type;if(g=="svg"?o="http://www.w3.org/2000/svg":g=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),r!=null){for(s=0;s<r.length;s++)if((f=r[s])&&"setAttribute"in f==!!g&&(g?f.localName==g:f.nodeType==3)){t=f,r[s]=null;break}}if(t==null){if(g==null)return document.createTextNode(v);t=document.createElementNS(o,g,v.is&&v),c&&(b.__m&&b.__m(e,r),c=!1),r=null}if(g==null)w===v||c&&t.data==v||(t.data=v);else{if(r=r&&X.call(t.childNodes),!c&&r!=null)for(w={},s=0;s<t.attributes.length;s++)w[(f=t.attributes[s]).name]=f.value;for(s in w)if(f=w[s],s!="children"){if(s=="dangerouslySetInnerHTML")l=f;else if(!(s in v)){if(s=="value"&&"defaultValue"in v||s=="checked"&&"defaultChecked"in v)continue;z(t,s,null,f,o)}}for(s in v)f=v[s],s=="children"?u=f:s=="dangerouslySetInnerHTML"?p=f:s=="value"?m=f:s=="checked"?P=f:c&&typeof f!="function"||w[s]===f||z(t,s,f,w[s],o);if(p)c||l&&(p.__html==l.__html||p.__html==t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(l&&(t.innerHTML=""),Ee(e.type=="template"?t.content:t,Y(u)?u:[u],e,n,i,g=="foreignObject"?"http://www.w3.org/1999/xhtml":o,r,_,r?r[0]:n.__k&&W(n,0),c,h),r!=null)for(s=r.length;s--;)_e(r[s]);c||(s="value",g=="progress"&&m==null?t.removeAttribute("value"):m!=null&&(m!==t[s]||g=="progress"&&!m||g=="option"&&m!=w[s])&&z(t,s,m,w[s],o),s="checked",P!=null&&P!=t[s]&&z(t,s,P,w[s],o))}return t}function ce(t,e,n){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(o){b.__e(o,n)}}function Ae(t,e,n){var i,o;if(b.unmount&&b.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||ce(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){b.__e(r,e)}i.base=i.__P=null}if(i=t.__k)for(o=0;o<i.length;o++)i[o]&&Ae(i[o],e,n||typeof t.type!="function");n||_e(t.__e),t.__c=t.__=t.__e=void 0}function qe(t,e,n){return this.constructor(t,n)}function ze(t,e,n){var i,o,r,_;e==document&&(e=document.documentElement),b.__&&b.__(t,e),o=(i=!1)?null:e.__k,r=[],_=[],se(e,t=e.__k=Re(q,null,[t]),o||j,j,e.namespaceURI,o?null:e.firstChild?X.call(e.childNodes):null,r,o?o.__e:e.firstChild,i,_),Ne(r,t,_)}X=Me.slice,b={__e:function(t,e,n,i){for(var o,r,_;e=e.__;)if((o=e.__c)&&!o.__)try{if((r=o.constructor)&&r.getDerivedStateFromError!=null&&(o.setState(r.getDerivedStateFromError(t)),_=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,i||{}),_=o.__d),_)return o.__E=o}catch(c){t=c}throw t}},Ce=0,G.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=S({},this.state),typeof t=="function"&&(t=t(S({},n),this.props)),t&&S(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),de(this))},G.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),de(this))},G.prototype.render=q,I=[],Pe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Te=function(t,e){return t.__v.__b-e.__v.__b},K.__r=0,$e=/(PointerCapture)$|Capture$/i,le=0,ne=he(!1),re=he(!0);var Ve=0;function a(t,e,n,i,o,r){e||(e={});var _,c,h=e;if("ref"in h)for(c in h={},e)c=="ref"?_=e[c]:h[c]=e[c];var s={type:t,props:h,key:n,ref:_,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ve,__i:-1,__u:0,__source:o,__self:r};if(typeof t=="function"&&(_=t.defaultProps))for(c in _)h[c]===void 0&&(h[c]=_[c]);return b.vnode&&b.vnode(s),s}var B,k,ee,pe,Q=0,Ie=[],x=b,me=x.__b,ve=x.__r,ge=x.diffed,ye=x.__c,be=x.unmount,we=x.__;function ae(t,e){x.__h&&x.__h(k,t,Q||e),Q=0;var n=k.__H||(k.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function H(t){return Q=1,Ge(De,t)}function Ge(t,e,n){var i=ae(B++,2);if(i.t=t,!i.__c&&(i.__=[De(void 0,e),function(c){var h=i.__N?i.__N[0]:i.__[0],s=i.t(h,c);h!==s&&(i.__N=[s,i.__[1]],i.__c.setState({}))}],i.__c=k,!k.__f)){var o=function(c,h,s){if(!i.__c.__H)return!0;var p=i.__c.__H.__.filter(function(u){return!!u.__c});if(p.every(function(u){return!u.__N}))return!r||r.call(this,c,h,s);var l=i.__c.props!==c;return p.forEach(function(u){if(u.__N){var f=u.__[0];u.__=u.__N,u.__N=void 0,f!==u.__[0]&&(l=!0)}}),r&&r.call(this,c,h,s)||l};k.__f=!0;var r=k.shouldComponentUpdate,_=k.componentWillUpdate;k.componentWillUpdate=function(c,h,s){if(this.__e){var p=r;r=void 0,o(c,h,s),r=p}_&&_.call(this,c,h,s)},k.shouldComponentUpdate=o}return i.__N||i.__}function U(t,e){var n=ae(B++,3);!x.__s&&Ue(n.__H,e)&&(n.__=t,n.u=e,k.__H.__h.push(n))}function Fe(t){return Q=5,O(function(){return{current:t}},[])}function O(t,e){var n=ae(B++,7);return Ue(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Je(){for(var t;t=Ie.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(J),t.__H.__h.forEach(ie),t.__H.__h=[]}catch(e){t.__H.__h=[],x.__e(e,t.__v)}}x.__b=function(t){k=null,me&&me(t)},x.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),we&&we(t,e)},x.__r=function(t){ve&&ve(t),B=0;var e=(k=t.__c).__H;e&&(ee===k?(e.__h=[],k.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(J),e.__h.forEach(ie),e.__h=[],B=0)),ee=k},x.diffed=function(t){ge&&ge(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ie.push(e)!==1&&pe===x.requestAnimationFrame||((pe=x.requestAnimationFrame)||Ke)(Je)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ee=k=null},x.__c=function(t,e){e.some(function(n){try{n.__h.forEach(J),n.__h=n.__h.filter(function(i){return!i.__||ie(i)})}catch(i){e.some(function(o){o.__h&&(o.__h=[])}),e=[],x.__e(i,n.__v)}}),ye&&ye(t,e)},x.unmount=function(t){be&&be(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{J(i)}catch(o){e=o}}),n.__H=void 0,e&&x.__e(e,n.__v))};var ke=typeof requestAnimationFrame=="function";function Ke(t){var e,n=function(){clearTimeout(i),ke&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,35);ke&&(e=requestAnimationFrame(n))}function J(t){var e=k,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),k=e}function ie(t){var e=k;t.__c=t.__(),k=e}function Ue(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function De(t,e){return typeof e=="function"?e(t):e}const xe=[150,200,250,300,350,400,500,650,800];function Qe(t){return t.replace(/\u00a0/g," ").split(/\s+/).map(e=>e.trim()).filter(Boolean)}function D(t,e,n){return Math.max(e,Math.min(n,t))}function te(){return`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,9)}`}async function Xe(t){const e=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",e);return[...new Uint8Array(n)].map(o=>o.toString(16).padStart(2,"0")).join("")}function Ye(t){let e="";for(let o=0;o<t.length;o+=32768)e+=String.fromCharCode(...t.slice(o,o+32768));return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}function Ze(t){const e=(4-t.length%4)%4,n=(t+"=".repeat(e)).replace(/-/g,"+").replace(/_/g,"/"),i=atob(n),o=new Uint8Array(i.length);for(let r=0;r<i.length;r++)o[r]=i.charCodeAt(r);return o}function et(t){const e=JSON.stringify(t),n=new TextEncoder().encode(e);return`sr1.${Ye(n)}`}function tt(t){const e=t.trim();if(!e.startsWith("sr1."))throw new Error("Not a speedreader v1 hash.");const n=e.slice(4),i=Ze(n),o=new TextDecoder().decode(i),r=JSON.parse(o);if(!r||r.v!==1)throw new Error("Unsupported hash version.");if(typeof r.fp!="string"||!r.fp)throw new Error("Hash missing fingerprint.");if(typeof r.i!="number"||!Number.isFinite(r.i))throw new Error("Hash missing index.");return r}function nt(t){if(!t)return null;const n=t.replace(/[^\p{L}\p{N}']/gu,"").length||t.length,i=n<=1?1:n<=5?2:n<=9?3:4,o=D(i-1,0,Math.max(0,t.length-1)),r=t.slice(0,o),_=t.slice(o,o+1),c=t.slice(o+1);return a("span",{children:[r,a("span",{class:"orp",children:_}),c]})}function rt(t){const{track:e,effectiveIndex:n,globalMaxLen:i,onApplyGlobalIndex:o}=t,r=Fe(null),[_,c]=H(""),[h,s]=H(null),p=e.words[n]??"",l=!!(e.fingerprint&&e.words.length),u=O(()=>!e.fingerprint||!e.words.length?"":et({v:1,fp:e.fingerprint,i:n,n:e.name||void 0,w:p||void 0}),[e.fingerprint,e.words.length,e.name,n,p]);function f(){s(null),c(""),r.current?.showModal()}function m(){r.current?.close()}async function P(){if(u)try{await navigator.clipboard.writeText(u),s("Copied to clipboard.")}catch{s("Could not access clipboard. Select and copy manually.")}}function w(){if(s(null),!e.fingerprint){s("Load a .txt file for this track first.");return}let v;try{v=tt(_)}catch(T){s(T instanceof Error?T.message:"Invalid hash.");return}if(v.fp!==e.fingerprint){s("This hash does not match the currently loaded text in this track.");return}const g=D(Math.trunc(v.i),0,Math.max(0,i-1));o(g),s(`Resumed to word index ${g+1}.`)}return a(q,{children:[a("button",{class:"btn",onClick:f,disabled:!l,title:l?"Copy/paste a resume hash":"Load a .txt file first",children:"Resume hash"}),a("dialog",{ref:r,class:"resume-dialog",onClose:()=>s(null),children:a("div",{class:"resume-dialog-inner",children:[a("div",{class:"resume-dialog-head",children:[a("strong",{children:"Resume hash"}),a("button",{class:"btn",onClick:m,title:"Close",children:"Close"})]}),a("div",{class:"resume-dialog-body",children:[a("div",{style:{display:"grid",gap:6},children:[a("label",{children:"Current (updates as you progress)"}),a("textarea",{class:"mono",rows:3,readOnly:!0,value:u||"Load a .txt file to generate a hash."}),a("div",{class:"control-row",children:a("button",{class:"btn primary",onClick:P,disabled:!u,children:"Copy"})})]}),a("div",{style:{display:"grid",gap:6},children:[a("label",{children:"Paste a hash to resume this track"}),a("textarea",{class:"mono",rows:3,placeholder:"Paste sr1.… here",value:_,onInput:v=>c(v.currentTarget.value)}),a("div",{class:"control-row",children:a("button",{class:"btn primary",onClick:w,disabled:!_.trim(),children:"Apply"})})]}),h?a("div",{class:"hint",style:{marginTop:0},children:h}):null]})]})})]})}function ot(){const[t,e]=H(()=>[{id:te(),name:"Track 1",rawText:"",words:[],fingerprint:void 0}]),[n,i]=H(0),[o,r]=H(300),[_,c]=H(!1),[h,s]=H(!1),[p,l]=H(()=>!!document.fullscreenElement),u={play:"▶︎",pause:"⏸︎",restart:"↻︎",fullscreen:"⤢︎",prev:"⏮︎",next:"⏭︎",remove:"✕︎"},f=O(()=>Math.round(6e4/D(o,60,2e3)),[o]),m=O(()=>t.reduce((d,y)=>Math.max(d,y.words.length),0),[t]),P=n<Math.max(0,m-1),w=n>0,v=Fe(null);function g(){e(d=>[...d,{id:te(),name:`Track ${d.length+1}`,rawText:"",words:[],fingerprint:void 0}])}function T(d){e(y=>{const C=y.filter(F=>F.id!==d);return C.length?C:[{id:te(),name:"Track 1",rawText:"",words:[],fingerprint:void 0}]})}async function M(d,y){if(!y)return;const C=await y.text(),F=await Xe(C);e(R=>R.map(Z=>Z.id===d?{...Z,name:y.name,rawText:C,words:Qe(C),fingerprint:F}:Z)),i(0)}function N(){i(d=>m?Math.min(d+1,Math.max(0,m-1)):0)}function E(){i(d=>Math.max(0,d-1))}U(()=>{if(!(!_||h))return v.current!=null&&window.clearInterval(v.current),v.current=window.setInterval(()=>{i(d=>{const y=m?Math.min(d+1,Math.max(0,m-1)):0;return m&&y>=m-1&&window.setTimeout(()=>c(!1),0),y})},f),()=>{v.current!=null&&window.clearInterval(v.current),v.current=null}},[_,h,f,m]),U(()=>{i(d=>m?Math.min(d,Math.max(0,m-1)):0)},[m]),U(()=>{function d(y){(y.key===" "||y.code==="Space")&&(y.preventDefault(),c(C=>!C)),y.key==="ArrowRight"&&N(),y.key==="ArrowLeft"&&E()}return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[m]);const $=t.some(d=>d.words.length>0);U(()=>{_&&!$&&c(!1)},[_,$]),U(()=>{function d(){l(!!document.fullscreenElement)}return document.addEventListener("fullscreenchange",d),d(),()=>document.removeEventListener("fullscreenchange",d)},[]),U(()=>(document.body.classList.toggle("fullscreen-mode",p),()=>document.body.classList.remove("fullscreen-mode")),[p]);async function L(){try{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()}catch{}}const A=O(()=>m?m<=1?100:Math.round(n/(m-1)*100):0,[n,m]);return a("div",{class:"container",children:[a("div",{class:"topbar",children:[a("div",{class:"brand",children:a("h1",{children:"Speedreader"})}),a("a",{href:"https://github.com/",target:"_blank",rel:"noreferrer",style:{display:"none"}})]}),a("div",{class:"panel controls",children:[a("div",{class:"control-row",children:[a("button",{class:`btn icon ${_?"":"primary"}`,onClick:()=>c(d=>!d),disabled:!$,title:`Toggle ${u.play}/${u.pause}`,children:_?u.pause:u.play}),a("button",{class:"btn icon",onClick:E,disabled:!$||!w,children:u.prev}),a("button",{class:"btn primary icon",onClick:N,disabled:!$||!P,children:u.next}),a("button",{class:"btn icon",onClick:()=>i(0),disabled:!$||n===0,children:u.restart})]}),a("div",{class:"control-row",style:{justifyContent:"flex-start"},children:[a("div",{style:{display:"grid",gap:6},children:[a("label",{for:"wpmPreset",children:"WPM preset"}),a("select",{id:"wpmPreset",value:String(o),onChange:d=>r(D(parseInt(d.currentTarget.value,10)||300,60,2e3)),children:[xe.map(d=>a("option",{value:d,children:[d," wpm"]},d)),xe.includes(o)?null:a("option",{value:o,children:[o," wpm (custom)"]},"custom")]})]}),a("div",{style:{display:"grid",gap:6},children:[a("label",{for:"wpmNumber",children:"WPM"}),a("input",{id:"wpmNumber",type:"number",inputMode:"numeric",min:60,max:2e3,step:10,value:o,onInput:d=>r(D(d.currentTarget.valueAsNumber||300,60,2e3))})]}),a("div",{style:{display:"grid",gap:6},children:[a("label",{children:"Timing"}),a("div",{class:"badge",children:[f," ms/word"]})]})]})]}),a("div",{class:"tracks",children:[t.map((d,y)=>{const C=d.words.length?D(n,0,Math.max(0,d.words.length-1)):0,F=d.words[C]??"";return a("div",{class:"panel track",children:[a("div",{class:"track-head",children:[a("div",{class:"track-title",children:[a("strong",{children:d.name||`Track ${y+1}`}),a("span",{children:d.words.length?`${d.words.length.toLocaleString()} words`:"No file loaded"})]}),a("div",{class:"control-row",children:[a("input",{type:"file",accept:".txt,text/plain",onChange:R=>M(d.id,R.currentTarget.files?.[0]??null)}),a(rt,{track:d,effectiveIndex:C,globalMaxLen:m,onApplyGlobalIndex:R=>i(R)}),a("button",{class:"btn danger icon",onClick:()=>T(d.id),title:"Delete track",children:u.remove})]})]}),a("div",{class:"reader",children:a("div",{class:"focus-word","aria-live":"polite","aria-atomic":"true",children:F?nt(F):a("span",{style:{color:"var(--muted)"},children:"Load a .txt file…"})})})]},d.id)}),a("div",{class:"control-row add-track-row",children:a("button",{class:"btn primary",onClick:g,title:"Add another track",children:"+ Add track"})}),a("div",{class:"hint",children:["Tip: press ",a("strong",{children:"Space"})," for ",u.play,"/",u.pause,", ",a("strong",{children:"→"})," for ",u.next,", ",a("strong",{children:"←"})," for ",u.prev,". All tracks advance together at the same WPM."]})]}),a("div",{class:"bottom-bar panel","aria-label":"Progress",children:[p?null:a("div",{class:"bottom-bar-row",children:[a("span",{class:"badge",children:["Progress ",A,"%"]}),a("div",{class:"control-row",style:{justifyContent:"flex-end"},children:a("button",{class:"btn icon",onClick:L,title:`Enter ${u.fullscreen}`,children:u.fullscreen})})]}),a("input",{class:"progress-slider",type:"range",min:0,max:Math.max(0,m-1),step:1,value:Math.min(n,Math.max(0,m-1)),disabled:!$||m<=1,onPointerDown:()=>s(!0),onPointerUp:()=>s(!1),onPointerCancel:()=>s(!1),onInput:d=>i(d.currentTarget.valueAsNumber||0)})]}),p?a("button",{class:"btn fs-exit-btn icon",onClick:L,title:`Exit ${u.fullscreen}`,children:u.fullscreen}):null]})}ze(a(ot,{}),document.getElementById("app"));
